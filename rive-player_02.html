<script>
  const canvas = document.getElementById("riveCanvas");

  // Retina-Canvas-Handling
  function resizeCanvas() {
    const dpr = window.devicePixelRatio || 1;
    canvas.width = window.innerWidth * dpr;
    canvas.height = window.innerHeight * dpr;
    canvas.style.width = window.innerWidth + "px";
    canvas.style.height = window.innerHeight + "px";
  }

  resizeCanvas();
  window.addEventListener("resize", resizeCanvas);

  let riveInstance;

  // Rive starten
  riveInstance = new rive.Rive({
    src: "https://noinspirationnofun.github.io/files/Blitz.riv",
    canvas: canvas,
    autoplay: true,
    stateMachines: "State Machine 1",
    artboardName: "Blitz",
    fit: rive.Fit.COVER,
    onLoad: () => {
      console.log("✅ Rive geladen");
    },
    onError: (err) => {
      console.error("❌ Rive Fehler:", err);
    }
  });

  // Klick-Interaktion
  canvas.addEventListener("click", () => {
    const inputs = riveInstance.stateMachineInputs("State Machine 1");
    const toggle = inputs.find(i => i.name === "toggle");
    if (toggle) {
      toggle.fire();
      console.log("⚡️ Trigger ausgelöst!");
    }
  });
</script>
